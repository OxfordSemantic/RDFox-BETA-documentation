<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>20. Logging &mdash; RDFox  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/ost_theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/dev-favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.14.2/dist/algoliasearch-lite.umd.js"></script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.46.2/dist/instantsearch.production.min.js"></script>
        <script defer="defer" src="_static/algolia.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="21. High Availability" href="high-availability.html" />
    <link rel="prev" title="19. RDFox Endpoint" href="rdfox-endpoint.html" />
    <!-- Start of HubSpot Cookie Blocking Code -->
    <script type="application/javascript" id="hs-cookie-banner-scan" data-hs-allowed="true" src="https://js.hs-banner.com/cookie-scanning/6485449/4b9c57c39524d7b4a85dd163da87b1d54dc9b0e11f55359272e78d1092aa8d77.js"></script>
    <!-- End of HubSpot Cookie Blocking Code -->

     

    <!-- Set up consent mode for Google Analytics -->
    <!-- Retrieve previous consent settings if present, otherwise deny everything -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}

        if(localStorage.getItem('consentMode') === null) {
            gtag('consent', 'default', {
                'ad_storage': 'denied',
                'analytics_storage': 'denied',
                'personalization_storage': 'denied',
                'functionality_storage': 'denied',
                'security_storage': 'denied',
                'ads_data_redaction': true,
            });
        } else {
            gtag('consent', 'default', JSON.parse(localStorage.getItem('consentMode')));
        }
    </script>
    <!-- End of consent mode setup for Google Analytics -->

    <!-- Listen for consent changes from HubSpot consent banner -->
    <script>
        var _hsp = window._hsp = window._hsp || [];
        _hsp.push(['addPrivacyConsentListener', function(consent) {
            const consentMode = {
                'ad_storage': consent.categories.advertisement ? 'granted' : 'denied',
                'analytics_storage': consent.categories.analytics ? 'granted' : 'denied',
                'personalization_storage': consent.categories.advertisement ? 'granted' : 'denied',
                'functionality_storage': consent.categories.functionality ? 'granted' : 'denied',
                'security_storage': consent.categories.functionality ? 'granted' : 'denied',
                'ads_data_redaction': consent.categories.advertisement ? false : true,
            };
            gtag('consent', 'update', consentMode);
            localStorage.setItem('consentMode', JSON.stringify(consentMode))

            // Google Tag Manager
            function addGtm(w,d,s,l,i){
                w[l]=w[l]||[];
                w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
                var f=d.getElementsByTagName(s)[0];
                var j=d.createElement(s);
                var dl=l!='dataLayer'?'&l='+l:'';
                j.async=true;
                j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
                f.parentNode.insertBefore(j,f);
            }
            if(
                consent.categories.analytics
                || consent.categories.functionality
                || consent.categories.advertisement
            ) {
                addGtm(window,document,'script','dataLayer','GTM-WFM2Q9D');
            }
            // End of Google Tag Manager code
        }]);
    </script>
    <!-- End of consent listener -->
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="welcome-to-rdfox.html">1. Welcome to RDFox</a></li>
<li class="toctree-l1"><a class="reference internal" href="features-and-requirements.html">2. RDFox Features and Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">3. Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Organization of Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="servers.html">4. Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-stores.html">5. Data Stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="tuple-tables.html">6. Tuple Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-sources.html">7. Data Sources</a></li>
</ul>
<p class="caption"><span class="caption-text">Functionality</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="import-and-export.html">8. Import and Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="querying.html">9. Querying</a></li>
<li class="toctree-l1"><a class="reference internal" href="reasoning.html">10. Reasoning</a></li>
<li class="toctree-l1"><a class="reference internal" href="transactions.html">11. Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="access-control.html">12. Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistence.html">13. Persistence</a></li>
</ul>
<p class="caption"><span class="caption-text">Interfaces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="connections.html">14. Connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="rdfox-shell.html">15. RDFox Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="apis.html">16. APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="javadoc.html">17. Javadoc</a></li>
</ul>
<p class="caption"><span class="caption-text">Operations Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rdfox-executable.html">18. RDFox Executable</a></li>
<li class="toctree-l1"><a class="reference internal" href="rdfox-endpoint.html">19. RDFox Endpoint</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">20. Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-logging">20.1. API Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recommended-usage">20.1.1. Recommended Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#http-request-logging">20.2. HTTP Request Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#errors-and-exceptions">20.2.1. Errors and Exceptions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="high-availability.html">21. High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">22. RDFox Docker Images</a></li>
</ul>
<p class="caption"><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="security-advisories.html">Security Advisories</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgments.html">Acknowledgments</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RDFox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">20. </span>Logging</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="logging">
<span id="id1"></span><h1><span class="section-number">20. </span>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h1>
<p>RDFox® supports two types of logging: API logging, which can be used with any
RDFox interface, and HTTP request logging, which is specific to the RDFox
endpoint. This section describes the purpose of each type of logging and
provides guidance on usage.</p>
<div class="section" id="api-logging">
<span id="id2"></span><h2><span class="section-number">20.1. </span>API Logging<a class="headerlink" href="#api-logging" title="Permalink to this headline">¶</a></h2>
<p>API logging has been designed in order to simplify the reproduction of issues
with importation, querying or reasoning, regardless of which RDFox API is being
used when an issue is encountered. To support reproducing a problem, API
logging can be switched on, after which all calls to the core RDFox API are
logged into a shell script. This script can later be run in the RDFox shell,
and this will produce exactly the same sequence of internal calls to RDFox.
Hence, replaying the script will hopefully reproduce the original problem,
which is the first important step towards analyzing the problem and providing
support.</p>
<p>Each shell command written to the script is surrounded by comments containing
the time and date of the API call, the duration of the call, and the details of
any exception arising as a result of the call. This information is intended to
help with analyzing the problem.</p>
<p>When API logging is enabled, each RDFox server session creates a subdirectory
of the configured logging directory whose name is derived from the date and
time that the server was started. The directory will contain a single script
file named <code class="docutils literal notranslate"><span class="pre">script.txt</span></code>. Additionally, each distinct input imported during
the session is recorded as a separate file in the directory so that the shell
script can repeat the relevant import operations. An exception to this is
inputs imported as files: since these are already available from the local
file system and may be large, API logging does not create copies.</p>
<p>API logging is configured via the server parameters whose names begin with
<code class="docutils literal notranslate"><span class="pre">api-log</span></code> (see <a class="reference internal" href="servers.html#server-parameters"><span class="std std-numref">Section 4.3</span></a>).</p>
<div class="section" id="recommended-usage">
<h3><span class="section-number">20.1.1. </span>Recommended Usage<a class="headerlink" href="#recommended-usage" title="Permalink to this headline">¶</a></h3>
<p>Although API logging has no impact on the function of the API, it may introduce
a non-negligible performance penalty depending on the exact pattern of API
calls. Accordingly, API logging is disabled by default and should only be
enabled while trying to reproduce an issue.</p>
<p>The recommended workflow to reproduce any problem for offline analysis is to
restart the RDFox server with API logging enabled, repeat the interactions
which provoked the issue, restart the server again with logging disabled and
then to archive the directory created by the session where logging was enabled.</p>
<p>When archiving a log directory for offline reproduction, the following items
should be gathered:</p>
<ul class="simple">
<li><p>the log directory created for the session (including all its files),</p></li>
<li><p>the server directory if role persistence or role and data store persistence
are enabled, and</p></li>
<li><p>any files that were imported during the logging session.</p></li>
</ul>
<p>Note that, when moving the above items to another system, manual editing of the
log script may be necessary to ensure that the paths to any imported files are
correct for the receiving system.</p>
<div class="example docutils container">
<p><strong>Example:</strong> The following shell command imports one local Turtle file and
one TriG file hosted at the imaginary example.org::</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import /home/user1/data.ttl &lt;https://example.org/hosted-data.trig&gt;
</pre></div>
</div>
<p>When API logging is enabled, this would lead to a log entry similar to the
following:</p>
<div class="highlight-none notranslate"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>########### 2021-07-12 11:19:05 +0100 ###########
# START importData on ldsc1
import + \
    &quot;/home/user1/data.ttl&quot; \
    &quot;input_recording_000001+.txt&quot;
</pre></div></td></tr></table></div>
</div>
<p>The local file path has been used directly in the import command in the log
entry (on line 4) whereas the data retrieved from example.org has been
recorded into <code class="docutils literal notranslate"><span class="pre">input_recording_000001+.txt</span></code> and is then referenced using
just that file name as a relative path (on line 5). When archiving the
directory containing the above API log for reproduction later on, a copy of
the file at <code class="docutils literal notranslate"><span class="pre">/home/user1/data.ttl</span></code> should be included and line 4 of the
above snippet adjusted as needed to ensure that it refers to the same file
as <code class="docutils literal notranslate"><span class="pre">/home/user1/data.ttl</span></code> did when the logged import operation occurred.</p>
</div>
</div>
</div>
<div class="section" id="http-request-logging">
<span id="request-logging"></span><h2><span class="section-number">20.2. </span>HTTP Request Logging<a class="headerlink" href="#http-request-logging" title="Permalink to this headline">¶</a></h2>
<p>HTTP request logging provides standardized logging of HTTP requests serviced by
the RDFox endpoint. Common log format (<code class="docutils literal notranslate"><span class="pre">clf</span></code>) and extended log format
(<code class="docutils literal notranslate"><span class="pre">elf</span></code>) are supported, as well as <code class="docutils literal notranslate"><span class="pre">elf-json</span></code>, a JSON compatible variant of
the extended log format.  In contrast to API logging, request logging has been
implemented to minimize the impact on performance as much as possible, and so
the use of HTTP request logging in production is recommended.</p>
<p>HTTP request logging is configured via the endpoint parameters
<code class="docutils literal notranslate"><span class="pre">request-logger</span></code> and, when an extended log format logger is active,
<code class="docutils literal notranslate"><span class="pre">elf-logger-fields</span></code> and <code class="docutils literal notranslate"><span class="pre">elf-logger-recorded-events</span></code> (see
<a class="reference internal" href="rdfox-endpoint.html#endpoint-parameters"><span class="std std-numref">Section 19.2</span></a>).</p>
<div class="section" id="errors-and-exceptions">
<h3><span class="section-number">20.2.1. </span>Errors and Exceptions<a class="headerlink" href="#errors-and-exceptions" title="Permalink to this headline">¶</a></h3>
<p>The endpoint attempts to ensure that, when a logger is configured, a single log
entry is created for each attempted request, regardless of any errors that have
occurred. For example, if a client connects and then sends arbitrary data not
conforming to the HTTP protocol, a log entry is still made with dashes (<code class="docutils literal notranslate"><span class="pre">-</span></code>)
in place of, for example, the request method or URI.</p>
<p>In the case of an error which prevents RDFox accepting a new connection, the
extended log format logger supports the proprietary field identifier
<code class="docutils literal notranslate"><span class="pre">x-socket-exception</span></code> which can be used to specify that the textual
representation of such errors should be included in the log. This can be useful
for diagnosing problems with the configuration of the endpoint such as when the
number of concurrent connections to the endpoint exhausts the allowed limit for
open file descriptors.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rdfox-endpoint.html" class="btn btn-neutral float-left" title="19. RDFox Endpoint" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="high-availability.html" class="btn btn-neutral float-right" title="21. High Availability" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Oxford Semantic Technologies Ltd.</p>
  </div>

  
     

    <!-- consent banner, edit cookies button and HS cookies -->
    <!-- Start of HubSpot Embed Code -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/6485449.js"></script>
    <!-- End of HubSpot Embed Code -->

    <!-- Cookies settings button -->
    <!-- Start of HubSpot code snippet -->
    <button type="button" id="hs_show_banner_button"
    style="background-color: #fff; border: 1px solid #2980b9;
        border-radius: 3px; padding: 5px 8px; text-decoration: none; color: #2980b9;
        font-family: inherit; font-size: 80%; font-weight: normal; line-height: inherit;
        text-align: left; text-shadow: none;"
    onClick="(function(){
            var _hsp = window._hsp = window._hsp || [];
            _hsp.push(['showBanner']);
        })()"
    >
    Cookie Settings
    </button>
    <style>
        @media all and (min-width:1160px){
            .hs-cookie-notification-position-bottom {width: 80%!important;}
        }
    </style>
    <!-- End of HubSpot code snippet -->
    <!-- consent banner, edit cookies button and HS cookies -->

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>